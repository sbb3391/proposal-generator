{"ast":null,"code":"// import { combineReducers } from 'redux';\nfunction newMachineReducer(state = {\n  clickedAssemblyId: null,\n  machine: {\n    completedMachine: false,\n    assemblies: []\n  },\n  model: {\n    allAssemblies: [],\n    remainingAssemblies: []\n  }\n}, action) {\n  switch (action.type) {\n    case 'ADD_MODEL':\n      return Object.assign({}, { ...state\n      }, {\n        modelId: action.modelId\n      });\n\n    case 'ADD_ALL_ASSEMBLIES':\n      // This only gets called once to add all machine assemblies from fetch to the store\n      const requiredAssemblies = action.assemblies.filter(assembly => assembly.required_assembly);\n      const unrequiredAssemblies = action.assemblies.filter(assembly => !assembly.required_assembly);\n      return { ...state,\n        machine: {\n          assemblies: requiredAssemblies\n        },\n        model: { ...state.model,\n          allAssemblies: action.assemblies,\n          remainingAssemblies: unrequiredAssemblies\n        }\n      };\n\n    case 'ADD_ASSEMBLY':\n      // this takes one assembly and adds it to the machine assembly (the one we're building)\n      // and removes it from the list of remaining assemblies that are available for selection\n      const indexOfAddedAssembly = state.model.remainingAssemblies.indexOf(action.assembly);\n      return { ...state,\n        clickedAssemblyId: action.assembly.id,\n        machine: { ...state.machine,\n          assemblies: [...state.machine.assemblies, action.assembly]\n        },\n        model: { ...state.model,\n          remainingAssemblies: [...state.model.remainingAssemblies.slice(0, indexOfAddedAssembly), ...state.model.remainingAssemblies.slice(indexOfAddedAssembly + 1)]\n        }\n      };\n\n    case 'REMOVE_CLICKED_ID':\n      return { ...state,\n        clickedAssemblyId: null\n      };\n\n    default:\n      return { ...state\n      };\n  }\n}\n\nexport default newMachineReducer;","map":{"version":3,"sources":["/home/sbb3391/code/projects/react-proposal-generator/src/reducers/newMachineReducer.js"],"names":["newMachineReducer","state","clickedAssemblyId","machine","completedMachine","assemblies","model","allAssemblies","remainingAssemblies","action","type","Object","assign","modelId","requiredAssemblies","filter","assembly","required_assembly","unrequiredAssemblies","indexOfAddedAssembly","indexOf","id","slice"],"mappings":"AAAA;AAEA,SAASA,iBAAT,CAA2BC,KAAK,GAAG;AACjCC,EAAAA,iBAAiB,EAAE,IADc;AAEjCC,EAAAA,OAAO,EAAE;AACPC,IAAAA,gBAAgB,EAAE,KADX;AAEPC,IAAAA,UAAU,EAAE;AAFL,GAFwB;AAMjCC,EAAAA,KAAK,EAAE;AACLC,IAAAA,aAAa,EAAE,EADV;AAELC,IAAAA,mBAAmB,EAAE;AAFhB;AAN0B,CAAnC,EAUGC,MAVH,EAUW;AACT,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,WAAL;AACE,aAAOC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,EAAC,GAAGX;AAAJ,OAAlB,EAA8B;AAACY,QAAAA,OAAO,EAAEJ,MAAM,CAACI;AAAjB,OAA9B,CAAP;;AACF,SAAK,oBAAL;AACE;AACA,YAAMC,kBAAkB,GAAGL,MAAM,CAACJ,UAAP,CAAkBU,MAAlB,CAA0BC,QAAQ,IAAIA,QAAQ,CAACC,iBAA/C,CAA3B;AACA,YAAMC,oBAAoB,GAAGT,MAAM,CAACJ,UAAP,CAAkBU,MAAlB,CAA0BC,QAAQ,IAAI,CAACA,QAAQ,CAACC,iBAAhD,CAA7B;AACA,aAAO,EACL,GAAGhB,KADE;AAEHE,QAAAA,OAAO,EAAE;AACPE,UAAAA,UAAU,EAAES;AADL,SAFN;AAKHR,QAAAA,KAAK,EAAE,EACL,GAAGL,KAAK,CAACK,KADJ;AAEHC,UAAAA,aAAa,EAAEE,MAAM,CAACJ,UAFnB;AAGHG,UAAAA,mBAAmB,EAAEU;AAHlB;AALJ,OAAP;;AAWF,SAAK,cAAL;AACE;AACA;AACA,YAAMC,oBAAoB,GAAGlB,KAAK,CAACK,KAAN,CAAYE,mBAAZ,CAAgCY,OAAhC,CAAwCX,MAAM,CAACO,QAA/C,CAA7B;AACA,aAAO,EACL,GAAGf,KADE;AAEHC,QAAAA,iBAAiB,EAAEO,MAAM,CAACO,QAAP,CAAgBK,EAFhC;AAGHlB,QAAAA,OAAO,EAAE,EACP,GAAGF,KAAK,CAACE,OADF;AAELE,UAAAA,UAAU,EAAE,CAAC,GAAGJ,KAAK,CAACE,OAAN,CAAcE,UAAlB,EAA8BI,MAAM,CAACO,QAArC;AAFP,SAHN;AAOHV,QAAAA,KAAK,EAAE,EACL,GAAGL,KAAK,CAACK,KADJ;AAEHE,UAAAA,mBAAmB,EAAE,CAAC,GAAGP,KAAK,CAACK,KAAN,CAAYE,mBAAZ,CAAgCc,KAAhC,CAAsC,CAAtC,EAAyCH,oBAAzC,CAAJ,EAAoE,GAAGlB,KAAK,CAACK,KAAN,CAAYE,mBAAZ,CAAgCc,KAAhC,CAAsCH,oBAAoB,GAAG,CAA7D,CAAvE;AAFlB;AAPJ,OAAP;;AAYF,SAAK,mBAAL;AACE,aAAO,EACL,GAAGlB,KADE;AAEHC,QAAAA,iBAAiB,EAAE;AAFhB,OAAP;;AAIF;AACE,aAAO,EAAC,GAAGD;AAAJ,OAAP;AAxCJ;AA0CD;;AAED,eAAeD,iBAAf","sourcesContent":["// import { combineReducers } from 'redux';\r\n\r\nfunction newMachineReducer(state = {\r\n  clickedAssemblyId: null,\r\n  machine: {\r\n    completedMachine: false,\r\n    assemblies: []\r\n  },\r\n  model: {\r\n    allAssemblies: [],\r\n    remainingAssemblies: []\r\n  }\r\n}, action) {\r\n  switch (action.type) {\r\n    case 'ADD_MODEL':\r\n      return Object.assign({}, {...state}, {modelId: action.modelId})\r\n    case 'ADD_ALL_ASSEMBLIES':\r\n      // This only gets called once to add all machine assemblies from fetch to the store\r\n      const requiredAssemblies = action.assemblies.filter( assembly => assembly.required_assembly)\r\n      const unrequiredAssemblies = action.assemblies.filter( assembly => !assembly.required_assembly)\r\n      return {\r\n        ...state,\r\n          machine: {\r\n            assemblies: requiredAssemblies\r\n          },\r\n          model: {\r\n            ...state.model,\r\n              allAssemblies: action.assemblies,\r\n              remainingAssemblies: unrequiredAssemblies\r\n          }\r\n      }\r\n    case 'ADD_ASSEMBLY':\r\n      // this takes one assembly and adds it to the machine assembly (the one we're building)\r\n      // and removes it from the list of remaining assemblies that are available for selection\r\n      const indexOfAddedAssembly = state.model.remainingAssemblies.indexOf(action.assembly)\r\n      return {\r\n        ...state,\r\n          clickedAssemblyId: action.assembly.id,\r\n          machine: {\r\n            ...state.machine,\r\n              assemblies: [...state.machine.assemblies, action.assembly]\r\n          },\r\n          model: {\r\n            ...state.model,\r\n              remainingAssemblies: [...state.model.remainingAssemblies.slice(0, indexOfAddedAssembly), ...state.model.remainingAssemblies.slice(indexOfAddedAssembly + 1)]\r\n          }\r\n      }\r\n    case 'REMOVE_CLICKED_ID':\r\n      return {\r\n        ...state,\r\n          clickedAssemblyId: null\r\n      }\r\n    default:\r\n      return {...state}\r\n  }\r\n}\r\n\r\nexport default newMachineReducer;\r\n"]},"metadata":{},"sourceType":"module"}